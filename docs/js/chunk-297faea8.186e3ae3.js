(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-297faea8"],{"293a":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat fuente"},[e.loading?a("Loading"):e._e(),a("h2",{staticClass:"text-center my-2"},[e._v("Chat")]),a("div",{staticClass:"bg-green-dark w-full pb-5 flex"},[a("div",{staticClass:"flex-0 tamanyo-div-titulo"},[a("router-link",{attrs:{to:{name:"list"}}},[a("i",{staticClass:"fas fa-caret-square-left tamanyo text-white border border-black mt-5"})])],1),a("div",{staticClass:"flex-1"},[a("h2",{staticClass:"margin-titulo"},[e._v(e._s(e.receptorUsername))])])]),a("div",{staticClass:"custom-scrollbar scrol"},e._l(e.mensajes,function(t){return a("div",{key:t.id,staticClass:"bg-grey-light w-2/3 mt-3 p-3 rounded",class:{"ml-4":t.fields.Receptor==e.$route.params.receptor,"margin-chat":t.fields.Receptor!=e.$route.params.receptor}},[a("p",[a("span",{class:{"text-black":t.fields.Receptor==e.$route.params.receptor,"text-black":t.fields.Receptor!=e.$route.params.receptor}},[e._v(e._s(t.fields.Texto))])])])}),0),a("div",{staticClass:"mt-3 fixed fixed pin-b pin-l p-5 w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.textoNuevoMensaje,expression:"textoNuevoMensaje"}],staticClass:"border border-black tamanyo-input",attrs:{type:"text"},domProps:{value:e.textoNuevoMensaje},on:{input:function(t){t.target.composing||(e.textoNuevoMensaje=t.target.value)}}}),a("button",{staticClass:"p-2 bg-green ml-2",on:{click:function(t){return t.preventDefault(),e.nuevoMensajeapi(t)}}},[e._v("Enviar")])])],1)},s=[],n=(a("cadf"),a("551c"),a("f751"),a("097d"),a("3a5e")),r={name:"chat",props:["emisor","receptor"],components:{Loading:n["a"]},data:function(){return{loading:!0,emisorUsername:"",receptorUsername:"",mensajes:[],textoNuevoMensaje:"",tiempoRefresco:1e3}},mounted:function(){var e=this;axios.get("https://api.airtable.com/v0/appnLtER6XsQjN5RQ/Usuarios/".concat(e.$route.params.emisor)).then(function(t){e.emisorUsername=t.data.fields.Username,axios.get("https://api.airtable.com/v0/appnLtER6XsQjN5RQ/Usuarios/".concat(e.$route.params.receptor)).then(function(t){e.receptorUsername=t.data.fields.Username,e.cargarMensajes(),setInterval(e.cargarMensajes,e.tiempoRefresco),console.log(t)}).catch(function(e){console.log(e)}).then(function(){})}).catch(function(e){console.log(e)}).then(function(){})},methods:{cargarMensajes:function(){var e=this;axios.get('https://api.airtable.com/v0/appnLtER6XsQjN5RQ/Mensajes?view=Grid%20view&filterByFormula=OR(AND({Emisor}="'.concat(e.emisorUsername,'", {Receptor}="').concat(e.receptorUsername,'"), AND({Emisor}="').concat(e.receptorUsername,'", {Receptor}="').concat(e.emisorUsername,'"))')).then(function(t){t.data.records.length!=e.mensajes.length&&(e.mensajes=t.data.records,e.loading=!1)}).catch(function(e){console.log(e)}).then(function(){})},nuevoMensajeapi:function(){var e=this;axios.defaults.headers.common["Authorization"]="Bearer keyz8WHYGEevQhA4L",axios.post("https://api.airtable.com/v0/appnLtER6XsQjN5RQ/Mensajes",{fields:{Texto:e.textoNuevoMensaje,Emisor:[e.$route.params.emisor],Receptor:[e.$route.params.receptor]}}).then(function(t){e.textoNuevoMensaje=""}).catch(function(e){console.log(e)}).then(function(){})}},updated:function(){var e=document.querySelector(".custom-scrollbar");e.scrollTo(0,document.body.scrollHeight),console.log("Hola")}},c=r,i=(a("2b6e"),a("2877")),l=Object(i["a"])(c,o,s,!1,null,"32f82162",null);t["default"]=l.exports},"2b6e":function(e,t,a){"use strict";var o=a("8918"),s=a.n(o);s.a},"3a5e":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lds-facebook"},[a("div"),a("div"),a("div")])}],n={name:"Loading",props:{}},r=n,c=(a("8020"),a("2877")),i=Object(c["a"])(r,o,s,!1,null,"5d88f088",null);t["a"]=i.exports},8020:function(e,t,a){"use strict";var o=a("c9f9"),s=a.n(o);s.a},8918:function(e,t,a){},c9f9:function(e,t,a){}}]);
//# sourceMappingURL=chunk-297faea8.186e3ae3.js.map